{"ast":null,"code":"import md5 from 'md5';\nimport { Base64 } from 'js-base64';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n} // package version used in the ix-lib parameter\n\n\nvar VERSION = '3.2.1'; // regex pattern used to determine if a domain is valid\n\nvar DOMAIN_REGEX = /^(?:[a-z\\d\\-_]{1,62}\\.){0,125}(?:[a-z\\d](?:\\-(?=\\-*[a-z\\d])|[a-z]|\\d){0,62}\\.)[a-z\\d]{1,63}$/i; // minimum generated srcset width\n\nvar MIN_SRCSET_WIDTH = 100; // maximum generated srcset width\n\nvar MAX_SRCSET_WIDTH = 8192; // default tolerable percent difference between srcset pair widths\n\nvar DEFAULT_SRCSET_WIDTH_TOLERANCE = 0.08; // default quality parameter values mapped by each dpr srcset entry\n\nvar DPR_QUALITIES = {\n  1: 75,\n  2: 50,\n  3: 35,\n  4: 23,\n  5: 20\n};\nvar DEFAULT_OPTIONS = {\n  domain: null,\n  useHTTPS: true,\n  includeLibraryParam: true,\n  urlPrefix: 'https://',\n  secureURLToken: null\n};\n\nfunction validateAndDestructureOptions(options) {\n  var widthTolerance;\n\n  if (options.widthTolerance !== undefined) {\n    validateWidthTolerance(options.widthTolerance);\n    widthTolerance = options.widthTolerance;\n  } else {\n    widthTolerance = DEFAULT_SRCSET_WIDTH_TOLERANCE;\n  }\n\n  var minWidth = options.minWidth === undefined ? MIN_SRCSET_WIDTH : options.minWidth;\n  var maxWidth = options.maxWidth === undefined ? MAX_SRCSET_WIDTH : options.maxWidth; // Validate the range unless we're using defaults for both\n\n  if (minWidth != MIN_SRCSET_WIDTH || maxWidth != MAX_SRCSET_WIDTH) {\n    validateRange(minWidth, maxWidth);\n  }\n\n  return [widthTolerance, minWidth, maxWidth];\n}\n\nfunction validateRange(min, max) {\n  if (!(Number.isInteger(min) && Number.isInteger(max)) || min <= 0 || max <= 0 || min > max) {\n    throw new Error(\"The min and max srcset widths can only be passed positive Number values, and min must be less than max. Found min: \".concat(min, \" and max: \").concat(max, \".\"));\n  }\n}\n\nfunction validateWidthTolerance(widthTolerance) {\n  if (typeof widthTolerance != 'number' || widthTolerance < 0.01) {\n    throw new Error('The srcset widthTolerance must be a number greater than or equal to 0.01');\n  }\n}\n\nfunction validateWidths(customWidths) {\n  if (!Array.isArray(customWidths) || !customWidths.length) {\n    throw new Error('The widths argument can only be passed a valid non-empty array of integers');\n  } else {\n    var allPositiveIntegers = customWidths.every(function (width) {\n      return Number.isInteger(width) && width > 0;\n    });\n\n    if (!allPositiveIntegers) {\n      throw new Error('A custom widths argument can only contain positive integer values');\n    }\n  }\n}\n\nfunction validateVariableQuality(disableVariableQuality) {\n  if (typeof disableVariableQuality != 'boolean') {\n    throw new Error('The disableVariableQuality argument can only be passed a Boolean value');\n  }\n}\n\nvar ImgixClient = /*#__PURE__*/function () {\n  function ImgixClient() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ImgixClient);\n\n    this.settings = _objectSpread2(_objectSpread2({}, DEFAULT_OPTIONS), opts); // a cache to store memoized srcset width-pairs\n\n    this.targetWidthsCache = {};\n\n    if (typeof this.settings.domain != 'string') {\n      throw new Error('ImgixClient must be passed a valid string domain');\n    }\n\n    if (DOMAIN_REGEX.exec(this.settings.domain) == null) {\n      throw new Error('Domain must be passed in as fully-qualified ' + 'domain name and should not include a protocol or any path ' + 'element, i.e. \"example.imgix.net\".');\n    }\n\n    if (this.settings.includeLibraryParam) {\n      this.settings.libraryParam = 'js-' + ImgixClient.version();\n    }\n\n    this.settings.urlPrefix = this.settings.useHTTPS ? 'https://' : 'http://';\n  }\n\n  _createClass(ImgixClient, [{\n    key: \"buildURL\",\n    value: function buildURL() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var sanitizedPath = this._sanitizePath(path);\n\n      var finalParams = this._buildParams(params);\n\n      if (!!this.settings.secureURLToken) {\n        finalParams = this._signParams(sanitizedPath, finalParams);\n      }\n\n      return this.settings.urlPrefix + this.settings.domain + sanitizedPath + finalParams;\n    }\n  }, {\n    key: \"_buildParams\",\n    value: function _buildParams() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var queryParams = [].concat(_toConsumableArray(this.settings.libraryParam ? [\"ixlib=\".concat(this.settings.libraryParam)] : []), _toConsumableArray(Object.entries(params).reduce(function (prev, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        if (value == null) {\n          return prev;\n        }\n\n        var encodedKey = encodeURIComponent(key);\n        var encodedValue = key.substr(-2) === '64' ? Base64.encodeURI(value) : encodeURIComponent(value);\n        prev.push(\"\".concat(encodedKey, \"=\").concat(encodedValue));\n        return prev;\n      }, [])));\n      return \"\".concat(queryParams.length > 0 ? '?' : '').concat(queryParams.join('&'));\n    }\n  }, {\n    key: \"_signParams\",\n    value: function _signParams(path, queryParams) {\n      var signatureBase = this.settings.secureURLToken + path + queryParams;\n      var signature = md5(signatureBase);\n      return queryParams.length > 0 ? queryParams + '&s=' + signature : '?s=' + signature;\n    }\n  }, {\n    key: \"_sanitizePath\",\n    value: function _sanitizePath(path) {\n      // Strip leading slash first (we'll re-add after encoding)\n      var _path = path.replace(/^\\//, '');\n\n      if (/^https?:\\/\\//.test(_path)) {\n        // Use de/encodeURIComponent to ensure *all* characters are handled,\n        // since it's being used as a path\n        _path = encodeURIComponent(_path);\n      } else {\n        // Use de/encodeURI if we think the path is just a path,\n        // so it leaves legal characters like '/' and '@' alone\n        _path = encodeURI(_path).replace(/[#?:+]/g, encodeURIComponent);\n      }\n\n      return '/' + _path;\n    }\n  }, {\n    key: \"buildSrcSet\",\n    value: function buildSrcSet(path) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var w = params.w,\n          h = params.h;\n\n      if (w || h) {\n        return this._buildDPRSrcSet(path, params, options);\n      } else {\n        return this._buildSrcSetPairs(path, params, options);\n      }\n    } // returns an array of width values used during srcset generation\n\n  }, {\n    key: \"_buildSrcSetPairs\",\n    value: function _buildSrcSetPairs(path, params, options) {\n      var _this = this;\n\n      var _validateAndDestructu = validateAndDestructureOptions(options),\n          _validateAndDestructu2 = _slicedToArray(_validateAndDestructu, 3),\n          widthTolerance = _validateAndDestructu2[0],\n          minWidth = _validateAndDestructu2[1],\n          maxWidth = _validateAndDestructu2[2];\n\n      var targetWidthValues;\n\n      if (options.widths) {\n        validateWidths(options.widths);\n        targetWidthValues = _toConsumableArray(options.widths);\n      } else {\n        targetWidthValues = ImgixClient.targetWidths(minWidth, maxWidth, widthTolerance, this.targetWidthsCache);\n      }\n\n      var srcset = targetWidthValues.map(function (w) {\n        return \"\".concat(_this.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          w: w\n        })), \" \").concat(w, \"w\");\n      });\n      return srcset.join(',\\n');\n    }\n  }, {\n    key: \"_buildDPRSrcSet\",\n    value: function _buildDPRSrcSet(path, params, options) {\n      var _this2 = this;\n\n      var targetRatios = [1, 2, 3, 4, 5];\n      var disableVariableQuality = options.disableVariableQuality || false;\n\n      if (!disableVariableQuality) {\n        validateVariableQuality(disableVariableQuality);\n      }\n\n      var withQuality = function withQuality(path, params, dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr,\n          q: params.q || DPR_QUALITIES[dpr]\n        })), \" \").concat(dpr, \"x\");\n      };\n\n      var srcset = disableVariableQuality ? targetRatios.map(function (dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr\n        })), \" \").concat(dpr, \"x\");\n      }) : targetRatios.map(function (dpr) {\n        return withQuality(path, params, dpr);\n      });\n      return srcset.join(',\\n');\n    }\n  }], [{\n    key: \"version\",\n    value: function version() {\n      return VERSION;\n    }\n  }, {\n    key: \"targetWidths\",\n    value: function targetWidths() {\n      var minWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      var maxWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8192;\n      var widthTolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.08;\n      var cache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var minW = Math.floor(minWidth);\n      var maxW = Math.floor(maxWidth);\n      validateRange(minWidth, maxWidth);\n      validateWidthTolerance(widthTolerance);\n      var cacheKey = widthTolerance + '/' + minW + '/' + maxW; // First, check the cache.\n\n      if (cacheKey in cache) {\n        return cache[cacheKey];\n      }\n\n      if (minW === maxW) {\n        return [minW];\n      }\n\n      var resolutions = [];\n      var currentWidth = minW;\n\n      while (currentWidth < maxW) {\n        // While the currentWidth is less than the maxW, push the rounded\n        // width onto the list of resolutions.\n        resolutions.push(Math.round(currentWidth));\n        currentWidth *= 1 + widthTolerance * 2;\n      } // At this point, the last width in resolutions is less than the\n      // currentWidth that caused the loop to terminate. This terminating\n      // currentWidth is greater than or equal to the maxW. We want to\n      // to stop at maxW, so we make sure our maxW is larger than the last\n      // width in resolutions before pushing it (if it's equal we're done).\n\n\n      if (resolutions[resolutions.length - 1] < maxW) {\n        resolutions.push(maxW);\n      }\n\n      cache[cacheKey] = resolutions;\n      return resolutions;\n    }\n  }]);\n\n  return ImgixClient;\n}();\n\nexport default ImgixClient;","map":{"version":3,"sources":["/Users/Jamie/Projects/customer_examples/react-movie-app/node_modules/@imgix/js-core/dist/index.esm.js"],"names":["md5","Base64","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","prototype","obj","value","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Symbol","iterator","from","_i","_arr","_n","_d","_s","_e","call","next","done","err","o","minLen","n","toString","slice","constructor","name","test","len","arr2","VERSION","DOMAIN_REGEX","MIN_SRCSET_WIDTH","MAX_SRCSET_WIDTH","DEFAULT_SRCSET_WIDTH_TOLERANCE","DPR_QUALITIES","DEFAULT_OPTIONS","domain","useHTTPS","includeLibraryParam","urlPrefix","secureURLToken","validateAndDestructureOptions","options","widthTolerance","undefined","validateWidthTolerance","minWidth","maxWidth","validateRange","min","max","Number","isInteger","Error","concat","validateWidths","customWidths","allPositiveIntegers","every","width","validateVariableQuality","disableVariableQuality","ImgixClient","opts","settings","targetWidthsCache","exec","libraryParam","version","buildURL","path","params","sanitizedPath","_sanitizePath","finalParams","_buildParams","_signParams","queryParams","entries","reduce","prev","_ref","_ref2","encodedKey","encodeURIComponent","encodedValue","substr","encodeURI","join","signatureBase","signature","_path","replace","buildSrcSet","w","h","_buildDPRSrcSet","_buildSrcSetPairs","_this","_validateAndDestructu","_validateAndDestructu2","targetWidthValues","widths","targetWidths","srcset","map","_this2","targetRatios","withQuality","dpr","q","cache","minW","Math","floor","maxW","cacheKey","resolutions","currentWidth","round"],"mappings":"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","sourcesContent":["import md5 from 'md5';\nimport { Base64 } from 'js-base64';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n// package version used in the ix-lib parameter\nvar VERSION = '3.2.1'; // regex pattern used to determine if a domain is valid\n\nvar DOMAIN_REGEX = /^(?:[a-z\\d\\-_]{1,62}\\.){0,125}(?:[a-z\\d](?:\\-(?=\\-*[a-z\\d])|[a-z]|\\d){0,62}\\.)[a-z\\d]{1,63}$/i; // minimum generated srcset width\n\nvar MIN_SRCSET_WIDTH = 100; // maximum generated srcset width\n\nvar MAX_SRCSET_WIDTH = 8192; // default tolerable percent difference between srcset pair widths\n\nvar DEFAULT_SRCSET_WIDTH_TOLERANCE = 0.08; // default quality parameter values mapped by each dpr srcset entry\n\nvar DPR_QUALITIES = {\n  1: 75,\n  2: 50,\n  3: 35,\n  4: 23,\n  5: 20\n};\nvar DEFAULT_OPTIONS = {\n  domain: null,\n  useHTTPS: true,\n  includeLibraryParam: true,\n  urlPrefix: 'https://',\n  secureURLToken: null\n};\n\nfunction validateAndDestructureOptions(options) {\n  var widthTolerance;\n\n  if (options.widthTolerance !== undefined) {\n    validateWidthTolerance(options.widthTolerance);\n    widthTolerance = options.widthTolerance;\n  } else {\n    widthTolerance = DEFAULT_SRCSET_WIDTH_TOLERANCE;\n  }\n\n  var minWidth = options.minWidth === undefined ? MIN_SRCSET_WIDTH : options.minWidth;\n  var maxWidth = options.maxWidth === undefined ? MAX_SRCSET_WIDTH : options.maxWidth; // Validate the range unless we're using defaults for both\n\n  if (minWidth != MIN_SRCSET_WIDTH || maxWidth != MAX_SRCSET_WIDTH) {\n    validateRange(minWidth, maxWidth);\n  }\n\n  return [widthTolerance, minWidth, maxWidth];\n}\nfunction validateRange(min, max) {\n  if (!(Number.isInteger(min) && Number.isInteger(max)) || min <= 0 || max <= 0 || min > max) {\n    throw new Error(\"The min and max srcset widths can only be passed positive Number values, and min must be less than max. Found min: \".concat(min, \" and max: \").concat(max, \".\"));\n  }\n}\nfunction validateWidthTolerance(widthTolerance) {\n  if (typeof widthTolerance != 'number' || widthTolerance < 0.01) {\n    throw new Error('The srcset widthTolerance must be a number greater than or equal to 0.01');\n  }\n}\nfunction validateWidths(customWidths) {\n  if (!Array.isArray(customWidths) || !customWidths.length) {\n    throw new Error('The widths argument can only be passed a valid non-empty array of integers');\n  } else {\n    var allPositiveIntegers = customWidths.every(function (width) {\n      return Number.isInteger(width) && width > 0;\n    });\n\n    if (!allPositiveIntegers) {\n      throw new Error('A custom widths argument can only contain positive integer values');\n    }\n  }\n}\nfunction validateVariableQuality(disableVariableQuality) {\n  if (typeof disableVariableQuality != 'boolean') {\n    throw new Error('The disableVariableQuality argument can only be passed a Boolean value');\n  }\n}\n\nvar ImgixClient = /*#__PURE__*/function () {\n  function ImgixClient() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ImgixClient);\n\n    this.settings = _objectSpread2(_objectSpread2({}, DEFAULT_OPTIONS), opts); // a cache to store memoized srcset width-pairs\n\n    this.targetWidthsCache = {};\n\n    if (typeof this.settings.domain != 'string') {\n      throw new Error('ImgixClient must be passed a valid string domain');\n    }\n\n    if (DOMAIN_REGEX.exec(this.settings.domain) == null) {\n      throw new Error('Domain must be passed in as fully-qualified ' + 'domain name and should not include a protocol or any path ' + 'element, i.e. \"example.imgix.net\".');\n    }\n\n    if (this.settings.includeLibraryParam) {\n      this.settings.libraryParam = 'js-' + ImgixClient.version();\n    }\n\n    this.settings.urlPrefix = this.settings.useHTTPS ? 'https://' : 'http://';\n  }\n\n  _createClass(ImgixClient, [{\n    key: \"buildURL\",\n    value: function buildURL() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var sanitizedPath = this._sanitizePath(path);\n\n      var finalParams = this._buildParams(params);\n\n      if (!!this.settings.secureURLToken) {\n        finalParams = this._signParams(sanitizedPath, finalParams);\n      }\n\n      return this.settings.urlPrefix + this.settings.domain + sanitizedPath + finalParams;\n    }\n  }, {\n    key: \"_buildParams\",\n    value: function _buildParams() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var queryParams = [].concat(_toConsumableArray(this.settings.libraryParam ? [\"ixlib=\".concat(this.settings.libraryParam)] : []), _toConsumableArray(Object.entries(params).reduce(function (prev, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        if (value == null) {\n          return prev;\n        }\n\n        var encodedKey = encodeURIComponent(key);\n        var encodedValue = key.substr(-2) === '64' ? Base64.encodeURI(value) : encodeURIComponent(value);\n        prev.push(\"\".concat(encodedKey, \"=\").concat(encodedValue));\n        return prev;\n      }, [])));\n      return \"\".concat(queryParams.length > 0 ? '?' : '').concat(queryParams.join('&'));\n    }\n  }, {\n    key: \"_signParams\",\n    value: function _signParams(path, queryParams) {\n      var signatureBase = this.settings.secureURLToken + path + queryParams;\n      var signature = md5(signatureBase);\n      return queryParams.length > 0 ? queryParams + '&s=' + signature : '?s=' + signature;\n    }\n  }, {\n    key: \"_sanitizePath\",\n    value: function _sanitizePath(path) {\n      // Strip leading slash first (we'll re-add after encoding)\n      var _path = path.replace(/^\\//, '');\n\n      if (/^https?:\\/\\//.test(_path)) {\n        // Use de/encodeURIComponent to ensure *all* characters are handled,\n        // since it's being used as a path\n        _path = encodeURIComponent(_path);\n      } else {\n        // Use de/encodeURI if we think the path is just a path,\n        // so it leaves legal characters like '/' and '@' alone\n        _path = encodeURI(_path).replace(/[#?:+]/g, encodeURIComponent);\n      }\n\n      return '/' + _path;\n    }\n  }, {\n    key: \"buildSrcSet\",\n    value: function buildSrcSet(path) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var w = params.w,\n          h = params.h;\n\n      if (w || h) {\n        return this._buildDPRSrcSet(path, params, options);\n      } else {\n        return this._buildSrcSetPairs(path, params, options);\n      }\n    } // returns an array of width values used during srcset generation\n\n  }, {\n    key: \"_buildSrcSetPairs\",\n    value: function _buildSrcSetPairs(path, params, options) {\n      var _this = this;\n\n      var _validateAndDestructu = validateAndDestructureOptions(options),\n          _validateAndDestructu2 = _slicedToArray(_validateAndDestructu, 3),\n          widthTolerance = _validateAndDestructu2[0],\n          minWidth = _validateAndDestructu2[1],\n          maxWidth = _validateAndDestructu2[2];\n\n      var targetWidthValues;\n\n      if (options.widths) {\n        validateWidths(options.widths);\n        targetWidthValues = _toConsumableArray(options.widths);\n      } else {\n        targetWidthValues = ImgixClient.targetWidths(minWidth, maxWidth, widthTolerance, this.targetWidthsCache);\n      }\n\n      var srcset = targetWidthValues.map(function (w) {\n        return \"\".concat(_this.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          w: w\n        })), \" \").concat(w, \"w\");\n      });\n      return srcset.join(',\\n');\n    }\n  }, {\n    key: \"_buildDPRSrcSet\",\n    value: function _buildDPRSrcSet(path, params, options) {\n      var _this2 = this;\n\n      var targetRatios = [1, 2, 3, 4, 5];\n      var disableVariableQuality = options.disableVariableQuality || false;\n\n      if (!disableVariableQuality) {\n        validateVariableQuality(disableVariableQuality);\n      }\n\n      var withQuality = function withQuality(path, params, dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr,\n          q: params.q || DPR_QUALITIES[dpr]\n        })), \" \").concat(dpr, \"x\");\n      };\n\n      var srcset = disableVariableQuality ? targetRatios.map(function (dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr\n        })), \" \").concat(dpr, \"x\");\n      }) : targetRatios.map(function (dpr) {\n        return withQuality(path, params, dpr);\n      });\n      return srcset.join(',\\n');\n    }\n  }], [{\n    key: \"version\",\n    value: function version() {\n      return VERSION;\n    }\n  }, {\n    key: \"targetWidths\",\n    value: function targetWidths() {\n      var minWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      var maxWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8192;\n      var widthTolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.08;\n      var cache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var minW = Math.floor(minWidth);\n      var maxW = Math.floor(maxWidth);\n      validateRange(minWidth, maxWidth);\n      validateWidthTolerance(widthTolerance);\n      var cacheKey = widthTolerance + '/' + minW + '/' + maxW; // First, check the cache.\n\n      if (cacheKey in cache) {\n        return cache[cacheKey];\n      }\n\n      if (minW === maxW) {\n        return [minW];\n      }\n\n      var resolutions = [];\n      var currentWidth = minW;\n\n      while (currentWidth < maxW) {\n        // While the currentWidth is less than the maxW, push the rounded\n        // width onto the list of resolutions.\n        resolutions.push(Math.round(currentWidth));\n        currentWidth *= 1 + widthTolerance * 2;\n      } // At this point, the last width in resolutions is less than the\n      // currentWidth that caused the loop to terminate. This terminating\n      // currentWidth is greater than or equal to the maxW. We want to\n      // to stop at maxW, so we make sure our maxW is larger than the last\n      // width in resolutions before pushing it (if it's equal we're done).\n\n\n      if (resolutions[resolutions.length - 1] < maxW) {\n        resolutions.push(maxW);\n      }\n\n      cache[cacheKey] = resolutions;\n      return resolutions;\n    }\n  }]);\n\n  return ImgixClient;\n}();\n\nexport default ImgixClient;\n"]},"metadata":{},"sourceType":"module"}